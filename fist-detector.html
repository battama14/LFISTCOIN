<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FIST-DETECTOR</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Press+Start+2P&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="fist-detector.css" />
  <script src="translations.js"></script>
  <style>
    /* Corrections spécifiques pour éviter le masquage des memecoins */
    
    /* Container principal avec z-index élevé - AMÉLIORÉ ET CENTRÉ */
    #detector-container {
      position: relative !important;
      z-index: 100 !important;
      min-height: 300px;
      margin: 2rem auto 4rem auto !important;
      padding: 2rem;
      background: rgba(26, 26, 46, 0.95) !important;
      border-radius: 20px;
      backdrop-filter: blur(10px);
      border: 2px solid #00ff88;
      box-shadow: 0 10px 40px rgba(0, 255, 136, 0.2);
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
      text-align: center !important;
      max-width: 1200px !important;
    }
    
    /* Cartes memecoins avec z-index très élevé - AMÉLIORÉES */
    .memecoin-card {
      position: relative !important;
      z-index: 150 !important;
      background: rgba(26, 26, 46, 0.98) !important;
      border: 2px solid #ff00cc;
      border-radius: 20px;
      padding: 2.5rem;
      margin: 1rem;
      text-align: left;
      transition: all 0.3s ease;
      backdrop-filter: blur(15px);
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6);
      min-height: 280px;
      display: flex !important;
      flex-direction: column;
      justify-content: space-between;
      visibility: visible !important;
      opacity: 1 !important;
      transform: translateZ(0); /* Force hardware acceleration */
    }
    
    .memecoin-card:hover {
      transform: translateY(-8px) translateZ(0);
      box-shadow: 0 20px 60px rgba(255, 0, 204, 0.6);
      border-color: #00ff88;
      z-index: 200 !important;
    }
    
    /* Message de vote avec z-index plus bas - CORRIGÉ */
    .meme-text {
      position: relative !important;
      z-index: 5 !important;
      margin-top: 4rem !important; /* Plus d'espace en haut */
      margin-bottom: 2rem !important;
      clear: both;
      background: rgba(26, 26, 46, 0.8) !important;
      padding: 2rem !important;
      border-radius: 15px !important;
      border: 1px solid #444 !important;
      backdrop-filter: blur(10px) !important;
    }
    
    /* Grid des memecoins - AMÉLIORÉE ET CENTRÉE */
    .memecoins-grid {
      display: grid !important;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 2.5rem;
      margin: 2rem auto 4rem auto !important;
      position: relative !important;
      z-index: 120 !important;
      padding: 0 1rem;
      visibility: visible !important;
      opacity: 1 !important;
      justify-items: center !important;
      max-width: 1200px !important;
    }
    
    /* Header des memecoins - AMÉLIORÉ */
    .memecoin-header {
      display: flex;
      align-items: flex-start;
      gap: 20px;
      margin-bottom: 20px;
      padding: 10px 0;
    }
    
    .memecoin-logo {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #00ff88;
      box-shadow: 0 0 15px rgba(0, 255, 136, 0.3);
      flex-shrink: 0; /* Empêche le rétrécissement */
      transition: all 0.3s ease;
    }
    
    .memecoin-logo:hover {
      transform: scale(1.1);
      box-shadow: 0 0 25px rgba(0, 255, 136, 0.5);
    }
    
    .memecoin-info {
      flex: 1;
      min-width: 0; /* Permet le text-overflow */
    }
    
    .memecoin-info h3 {
      color: #00ff88;
      margin-bottom: 8px;
      font-size: 1.3em;
      font-weight: bold;
    }
    
    .memecoin-info p {
      color: #ccc;
      font-size: 0.95em;
      line-height: 1.4;
      margin-bottom: 5px;
    }
    
    .memecoin-price {
      color: #00ff88 !important;
      font-weight: bold;
      font-size: 1.1em;
    }
    
    /* Section de vote - AMÉLIORÉE ET CENTRÉE */
    .vote-section {
      margin-top: 20px;
      text-align: center !important;
      padding: 15px 0;
      border-top: 1px solid rgba(255, 0, 204, 0.3);
      display: flex !important;
      flex-direction: column !important;
      align-items: center !important;
      justify-content: center !important;
    }
    
    .vote-btn {
      background: linear-gradient(45deg, #00ff88, #00cc66);
      color: #000;
      border: none;
      padding: 12px 25px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
      font-size: 1.1em;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3);
      width: 100%;
      max-width: 200px;
      margin: 0 auto !important;
      display: block !important;
      text-align: center !important;
    }
    
    .vote-btn:hover {
      background: linear-gradient(45deg, #00cc66, #009944);
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(0, 255, 136, 0.5);
    }
    
    .vote-btn:disabled {
      background: linear-gradient(45deg, #666, #555);
      color: #999;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    
    .vote-count {
      color: #00ff88;
      font-weight: bold;
      margin: 12px auto;
      font-size: 1.1em;
      text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
      text-align: center !important;
      display: block !important;
    }
    
    /* Lien site web */
    .memecoin-website {
      margin: 15px 0;
      text-align: center;
    }
    
    .memecoin-website a {
      color: #00ff88;
      text-decoration: none;
      font-weight: bold;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 5px;
    }
    
    .memecoin-website a:hover {
      color: #00ffe7;
      text-shadow: 0 0 10px rgba(0, 255, 231, 0.5);
    }
    
    /* Message d'état */
    .status-message {
      text-align: center;
      padding: 20px;
      margin: 20px 0;
      border-radius: 10px;
      position: relative;
      z-index: 15;
    }
    
    .status-message.loading {
      background: rgba(0, 255, 136, 0.1);
      color: #00ff88;
      border: 1px solid #00ff88;
    }
    
    .status-message.error {
      background: rgba(255, 68, 68, 0.1);
      color: #ff4444;
      border: 1px solid #ff4444;
    }
    
    .status-message.empty {
      background: rgba(255, 170, 0, 0.1);
      color: #ffaa00;
      border: 1px solid #ffaa00;
    }
    
    /* === RESPONSIVE MOBILE PARFAITEMENT CENTRÉ === */
    
    /* Tablette et Mobile Large (≤768px) */
    @media (max-width: 768px) {
      /* Container principal centré */
      #detector-container {
        margin: 1rem auto !important;
        padding: 1.5rem !important;
        max-width: 95% !important;
      }
      
      /* Grid en 1 colonne centrée */
      .memecoins-grid {
        grid-template-columns: 1fr !important;
        gap: 1.5rem !important;
        padding: 0 !important;
        justify-items: center !important;
        max-width: 100% !important;
      }
      
      /* Cartes centrées */
      .memecoin-card {
        margin: 0 auto !important;
        padding: 2rem !important;
        min-height: 250px !important;
        max-width: 500px !important;
        width: 100% !important;
        text-align: center !important;
      }
      
      /* Header centré */
      .memecoin-header {
        flex-direction: column !important;
        text-align: center !important;
        gap: 15px !important;
        align-items: center !important;
        justify-content: center !important;
      }
      
      /* Logo centré */
      .memecoin-logo {
        width: 70px !important;
        height: 70px !important;
        align-self: center !important;
        margin: 0 auto !important;
      }
      
      /* Info centrée */
      .memecoin-info {
        text-align: center !important;
        width: 100% !important;
      }
      
      .memecoin-info h3 {
        text-align: center !important;
        margin: 0 auto 10px auto !important;
      }
      
      .memecoin-info p {
        text-align: center !important;
        margin: 0 auto 8px auto !important;
      }
      
      /* Section de vote centrée */
      .vote-section {
        text-align: center !important;
        width: 100% !important;
        margin-top: 20px !important;
      }
      
      .vote-btn {
        width: 100% !important;
        max-width: 280px !important;
        margin: 0 auto !important;
        display: block !important;
      }
      
      .vote-count {
        text-align: center !important;
        margin: 15px auto 0 auto !important;
      }
      
      /* Lien site web centré */
      .memecoin-website {
        text-align: center !important;
        margin: 15px auto !important;
      }
      
      /* Header mobile centré */
      header {
        padding: 1rem !important;
        text-align: center !important;
      }
      
      .logo {
        font-size: 1.5rem !important;
        margin: 0 auto !important;
      }
      
      .nav-menu {
        justify-content: center !important;
        gap: 1rem !important;
      }
      
      .header-controls {
        justify-content: center !important;
        gap: 1rem !important;
      }
      
      /* Navigation rapide centrée */
      .quick-nav {
        text-align: center !important;
      }
      
      .quick-nav-container {
        justify-content: center !important;
        flex-wrap: wrap !important;
        gap: 0.5rem !important;
      }
      
      .quick-nav-item {
        font-size: 0.9rem !important;
        padding: 0.5rem 1rem !important;
      }
      
      /* Section hero centrée */
      .hero {
        text-align: center !important;
        padding: 2rem 1rem !important;
      }
      
      .hero h1 {
        font-size: 2.5rem !important;
        text-align: center !important;
        margin: 0 auto 1rem auto !important;
      }
      
      .hero p {
        font-size: 1.1rem !important;
        text-align: center !important;
        margin: 0 auto 2rem auto !important;
        max-width: 90% !important;
      }
      
      /* Countdown centré */
      .countdown-container {
        text-align: center !important;
        margin: 2rem auto !important;
        max-width: 90% !important;
      }
      
      .countdown {
        justify-content: center !important;
        gap: 1rem !important;
        flex-wrap: wrap !important;
      }
      
      .countdown-item {
        min-width: 70px !important;
        margin: 0.5rem !important;
      }
      
      .countdown-number {
        font-size: 1.8rem !important;
      }
      
      .countdown-label {
        font-size: 0.8rem !important;
      }
      
      /* Section Twitter responsive et centrée */
      .twitter-tracking-section {
        margin: 20px auto !important;
        padding: 20px !important;
        max-width: 95% !important;
        text-align: center !important;
      }
      
      .tracking-grid {
        grid-template-columns: 1fr !important;
        gap: 20px !important;
        justify-items: center !important;
      }
      
      .vote-stats-container {
        grid-template-columns: 1fr !important;
        gap: 10px !important;
        justify-content: center !important;
      }
      
      .twitter-feed-section,
      .vote-stats-section {
        text-align: center !important;
        max-width: 100% !important;
      }
      
      .recent-activity {
        text-align: center !important;
        max-width: 100% !important;
      }
    }
    
    /* Mobile Petit (≤480px) */
    @media (max-width: 480px) {
      /* Container encore plus compact */
      #detector-container {
        margin: 0.5rem auto !important;
        padding: 1rem !important;
        max-width: 98% !important;
      }
      
      /* Cartes plus compactes */
      .memecoin-card {
        padding: 1.5rem !important;
        margin: 0 auto 1rem auto !important;
        max-width: 100% !important;
        min-height: 220px !important;
      }
      
      /* Logo plus petit */
      .memecoin-logo {
        width: 60px !important;
        height: 60px !important;
      }
      
      /* Texte plus petit */
      .memecoin-info h3 {
        font-size: 1.1em !important;
      }
      
      .memecoin-info p {
        font-size: 0.9em !important;
      }
      
      /* Bouton plus compact */
      .vote-btn {
        padding: 12px 20px !important;
        font-size: 0.95em !important;
        max-width: 250px !important;
      }
      
      /* Header plus compact */
      header {
        padding: 0.8rem !important;
      }
      
      .logo {
        font-size: 1.3rem !important;
      }
      
      /* Hero plus compact */
      .hero {
        padding: 1.5rem 0.8rem !important;
      }
      
      .hero h1 {
        font-size: 2.2rem !important;
      }
      
      .hero p {
        font-size: 1rem !important;
      }
      
      /* Countdown plus compact */
      .countdown-container {
        margin: 1.5rem auto !important;
      }
      
      .countdown-item {
        min-width: 60px !important;
        margin: 0.3rem !important;
      }
      
      .countdown-number {
        font-size: 1.5rem !important;
      }
      
      .countdown-label {
        font-size: 0.7rem !important;
      }
      
      /* Navigation rapide plus compacte */
      .quick-nav-item {
        font-size: 0.8rem !important;
        padding: 0.4rem 0.8rem !important;
      }
      
      /* Section Twitter plus compacte */
      .twitter-tracking-section {
        padding: 15px !important;
        margin: 15px auto !important;
      }
      
      .twitter-tracking-section h2 {
        font-size: 1.8em !important;
      }
      
      .twitter-tracking-section p {
        font-size: 1em !important;
      }
    }
    
    /* Section Twitter et votes - CENTRAGE GÉNÉRAL */
    .twitter-tracking-section {
      text-align: center !important;
      margin: 3rem auto !important;
      padding: 2rem !important;
      max-width: 1200px !important;
      background: rgba(26, 26, 46, 0.95) !important;
      border-radius: 20px !important;
      border: 2px solid #00ff88 !important;
      box-shadow: 0 10px 40px rgba(0, 255, 136, 0.2) !important;
    }
    
    .twitter-tracking-section h2 {
      color: #00ff88 !important;
      font-size: 2rem !important;
      margin-bottom: 1rem !important;
      text-align: center !important;
    }
    
    .tracking-container {
      max-width: 100% !important;
      margin: 0 auto !important;
    }
    
    .tracking-grid {
      display: grid !important;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)) !important;
      gap: 2rem !important;
      justify-items: center !important;
      margin: 2rem 0 !important;
    }
    
    .twitter-feed-section,
    .vote-stats-section {
      background: rgba(26, 26, 46, 0.8) !important;
      border: 1px solid #444 !important;
      border-radius: 15px !important;
      padding: 1.5rem !important;
      text-align: center !important;
      width: 100% !important;
      max-width: 500px !important;
    }
    
    .vote-stats-container {
      display: grid !important;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)) !important;
      gap: 1rem !important;
      justify-content: center !important;
      margin: 1rem 0 !important;
    }
    
    .stat-card {
      background: rgba(0, 255, 136, 0.1) !important;
      border: 1px solid #00ff88 !important;
      border-radius: 10px !important;
      padding: 1rem !important;
      text-align: center !important;
    }
    
    .stat-number {
      font-size: 2rem !important;
      font-weight: bold !important;
      color: #00ff88 !important;
    }
    
    .stat-label {
      font-size: 0.9rem !important;
      color: #ccc !important;
      margin-top: 0.5rem !important;
    }
    
    .recent-activity {
      background: rgba(26, 26, 46, 0.8) !important;
      border: 1px solid #444 !important;
      border-radius: 15px !important;
      padding: 1.5rem !important;
      text-align: center !important;
      margin: 2rem auto !important;
      max-width: 800px !important;
    }

    /* Mobile Très Petit (≤360px) */
    @media (max-width: 360px) {
      #detector-container {
        padding: 0.8rem !important;
      }
      
      .memecoin-card {
        padding: 1.2rem !important;
        margin: 0 auto 0.8rem auto !important;
      }
      
      .memecoin-logo {
        width: 50px !important;
        height: 50px !important;
      }
      
      .vote-btn {
        padding: 10px 15px !important;
        font-size: 0.9em !important;
        max-width: 200px !important;
      }
      
      /* Header très compact */
      header {
        padding: 0.6rem !important;
      }
      
      .logo {
        font-size: 1.2rem !important;
      }
      
      /* Hero très compact */
      .hero {
        padding: 1rem 0.6rem !important;
      }
      
      .hero h1 {
        font-size: 2rem !important;
        line-height: 1.2 !important;
      }
      
      .hero p {
        font-size: 0.95rem !important;
      }
      
      /* Countdown très compact */
      .countdown-container {
        margin: 1rem auto !important;
      }
      
      .countdown {
        gap: 0.5rem !important;
      }
      
      .countdown-item {
        min-width: 50px !important;
        margin: 0.2rem !important;
      }
      
      .countdown-number {
        font-size: 1.3rem !important;
      }
      
      .countdown-label {
        font-size: 0.65rem !important;
      }
      
      /* Navigation très compacte */
      .quick-nav-item {
        font-size: 0.75rem !important;
        padding: 0.3rem 0.6rem !important;
      }
      
      .twitter-tracking-section {
        padding: 12px !important;
        margin: 10px auto !important;
      }
    }
    
    /* === STYLES POUR LA SECTION TWITTER TRACKING - CENTRÉ === */
    .twitter-tracking-section {
      background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
      border-radius: 15px;
      padding: 40px;
      margin: 40px auto;
      border: 2px solid #333;
      max-width: 1400px;
      text-align: center;
    }
    
    .twitter-tracking-section h2 {
      text-align: center;
      color: #00ff88;
      font-size: 2.2em;
      margin-bottom: 15px;
      text-shadow: 0 0 15px rgba(0, 255, 136, 0.4);
      font-weight: bold;
    }
    
    .twitter-tracking-section p {
      text-align: center;
      color: #ccc;
      margin-bottom: 40px;
      font-size: 1.2em;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
      margin-bottom: 40px;
    }
    
    .tracking-container {
      max-width: 1200px;
      margin: 0 auto;
      text-align: left; /* Réinitialiser l'alignement pour le contenu */
    }
    
    .tracking-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-bottom: 30px;
    }
    
    .twitter-feed-section,
    .vote-stats-section {
      background: #2a2a2a;
      border-radius: 12px;
      padding: 25px;
      border: 2px solid #444;
      transition: all 0.3s ease;
    }
    
    .twitter-feed-section:hover,
    .vote-stats-section:hover {
      border-color: #00ff88;
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.2);
    }
    
    .twitter-feed-section h3,
    .vote-stats-section h3 {
      color: #00ffe7;
      margin-bottom: 20px;
      font-size: 1.3em;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .twitter-feed {
      max-height: 400px;
      overflow-y: auto;
      margin-bottom: 20px;
      border: 1px solid #444;
      border-radius: 8px;
      padding: 15px;
      background: #1a1a1a;
    }
    
    .tweet-item {
      background: #333;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      border-left: 3px solid #00ff88;
      transition: all 0.3s ease;
    }
    
    .tweet-item:hover {
      background: #3a3a3a;
      transform: translateX(5px);
    }
    
    .tweet-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }
    
    .tweet-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: #00ff88;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
    }
    
    .tweet-user {
      color: #00ffe7;
      font-weight: bold;
    }
    
    .tweet-handle {
      color: #888;
      font-size: 0.9em;
    }
    
    .tweet-time {
      color: #666;
      font-size: 0.8em;
      margin-left: auto;
    }
    
    .tweet-content {
      color: #ccc;
      line-height: 1.4;
      margin-bottom: 10px;
    }
    
    .tweet-stats {
      display: flex;
      gap: 15px;
      font-size: 0.8em;
      color: #888;
    }
    
    .loading-tweets,
    .loading-leaderboard,
    .loading-activity {
      text-align: center;
      padding: 40px;
      color: #666;
    }
    
    .tweet-loading-spinner {
      width: 30px;
      height: 30px;
      border: 3px solid #333;
      border-top: 3px solid #00ff88;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 15px;
    }
    
    .twitter-actions {
      display: flex;
      gap: 15px;
      justify-content: center;
    }
    
    .refresh-btn,
    .follow-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    
    .refresh-btn {
      background: #444;
      color: #fff;
    }
    
    .refresh-btn:hover {
      background: #555;
      transform: translateY(-2px);
    }
    
    .follow-btn {
      background: #1DA1F2;
      color: white;
    }
    
    .follow-btn:hover {
      background: #1991DB;
      transform: translateY(-2px);
    }
    
    .vote-stats-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-bottom: 25px;
    }
    
    .stat-card {
      background: #1a1a1a;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      border: 1px solid #444;
      transition: all 0.3s ease;
    }
    
    .stat-card:hover {
      border-color: #00ff88;
      transform: translateY(-3px);
    }
    
    .stat-number {
      font-size: 2em;
      font-weight: bold;
      color: #00ffe7;
      margin-bottom: 5px;
    }
    
    .stat-label {
      color: #999;
      font-size: 0.9em;
    }
    
    .vote-leaderboard h4 {
      color: #00ff88;
      margin-bottom: 15px;
      font-size: 1.1em;
    }
    
    .leaderboard-list {
      background: #1a1a1a;
      border-radius: 8px;
      padding: 15px;
      border: 1px solid #444;
    }
    
    .leaderboard-item {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 10px;
      margin-bottom: 10px;
      background: #333;
      border-radius: 6px;
      transition: all 0.3s ease;
    }
    
    .leaderboard-item:hover {
      background: #3a3a3a;
    }
    
    .leaderboard-rank {
      font-size: 1.2em;
      font-weight: bold;
      min-width: 30px;
    }
    
    .leaderboard-coin {
      flex: 1;
      color: #00ffe7;
      font-weight: bold;
    }
    
    .leaderboard-votes {
      color: #00ff88;
      font-weight: bold;
    }
    
    .recent-activity {
      background: #2a2a2a;
      border-radius: 12px;
      padding: 25px;
      border: 2px solid #444;
    }
    
    .recent-activity h3 {
      color: #00ffe7;
      margin-bottom: 20px;
      font-size: 1.3em;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .activity-feed {
      max-height: 300px;
      overflow-y: auto;
    }
    
    .activity-item {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 12px;
      margin-bottom: 10px;
      background: #1a1a1a;
      border-radius: 8px;
      border-left: 3px solid #00ff88;
      transition: all 0.3s ease;
    }
    
    .activity-item:hover {
      background: #333;
      transform: translateX(5px);
    }
    
    .activity-icon {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: #00ff88;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      color: #000;
    }
    
    .activity-content {
      flex: 1;
    }
    
    .activity-text {
      color: #ccc;
      margin-bottom: 3px;
    }
    
    .activity-time {
      color: #666;
      font-size: 0.8em;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Responsive pour la section Twitter */
    @media (max-width: 768px) {
      .tracking-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }
      
      .vote-stats-container {
        grid-template-columns: 1fr;
      }
      
      .twitter-actions {
        flex-direction: column;
      }
      
      .twitter-tracking-section h2 {
        font-size: 1.5em;
      }
    }
    
    /* === STYLES POUR LE POPUP DE CONFIRMATION DE VOTE - VERSION AMÉLIORÉE === */
    .popup-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      backdrop-filter: blur(5px);
    }
    
    .popup-overlay.show {
      display: flex;
    }
    
    .popup-content {
      background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
      border-radius: 20px;
      max-width: 500px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      border: 3px solid #00ff88;
      box-shadow: 0 20px 60px rgba(0, 255, 136, 0.4);
      animation: slideIn 0.3s ease-out;
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-50px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    
    .popup-header {
      background: linear-gradient(45deg, #00ff88, #00cc66);
      color: #000;
      padding: 25px 30px;
      border-radius: 17px 17px 0 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .popup-header h2 {
      margin: 0;
      font-size: 1.8em;
      font-weight: bold;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }
    
    .close-btn {
      background: rgba(0, 0, 0, 0.2);
      border: none;
      color: #000;
      font-size: 2em;
      font-weight: bold;
      cursor: pointer;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }
    
    .close-btn:hover {
      background: rgba(0, 0, 0, 0.4);
      transform: rotate(90deg);
    }
    
    .popup-body {
      padding: 30px;
    }
    
    .voted-coin {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 30px;
      padding: 20px;
      background: #2a2a2a;
      border-radius: 15px;
      border: 2px solid #444;
    }
    
    .voted-coin-logo {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: 3px solid #00ff88;
      object-fit: cover;
    }
    
    .voted-coin-info h3 {
      color: #00ffe7;
      margin: 0 0 10px 0;
      font-size: 1.4em;
    }
    
    .voted-coin-info p {
      color: #ccc;
      margin: 0;
      font-size: 1em;
    }
    
    .share-section {
      text-align: center;
      margin-bottom: 25px;
      padding: 20px;
      background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
      border-radius: 12px;
      border-left: 4px solid #00ff88;
    }
    
    .share-section h4 {
      color: #00ff88;
      margin: 0 0 10px 0;
      font-size: 1.3em;
    }
    
    .share-section p {
      color: #ccc;
      margin: 0;
      font-size: 1em;
      line-height: 1.5;
    }
    
    .social-buttons {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin-bottom: 25px;
    }
    
    .social-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 15px 20px;
      border: none;
      border-radius: 12px;
      font-weight: bold;
      font-size: 1em;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
    }
    
    .social-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    }
    
    .social-btn.twitter {
      background: linear-gradient(45deg, #1DA1F2, #0d8bd9);
      color: white;
    }
    
    .social-btn.telegram {
      background: linear-gradient(45deg, #0088cc, #006699);
      color: white;
    }
    
    .social-btn.reddit {
      background: linear-gradient(45deg, #FF4500, #cc3700);
      color: white;
    }
    
    .social-btn.facebook {
      background: linear-gradient(45deg, #1877F2, #0d65d9);
      color: white;
    }
    
    .popup-actions {
      text-align: center;
      padding-top: 20px;
      border-top: 1px solid #444;
    }
    
    .confirm-btn {
      background: linear-gradient(45deg, #00ff88, #00cc66);
      color: #000;
      border: none;
      padding: 15px 30px;
      border-radius: 12px;
      font-weight: bold;
      font-size: 1.1em;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0, 255, 136, 0.3);
    }
    
    .confirm-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 255, 136, 0.5);
    }
    
    /* Responsive pour le popup */
    @media (max-width: 768px) {
      .popup-content {
        width: 95%;
        margin: 10px;
      }
      
      .popup-header {
        padding: 20px;
      }
      
      .popup-header h2 {
        font-size: 1.5em;
      }
      
      .popup-body {
        padding: 20px;
      }
      
      .voted-coin {
        flex-direction: column;
        text-align: center;
        gap: 15px;
      }
      
      .social-buttons {
        grid-template-columns: 1fr;
        gap: 12px;
      }
    }
  </style>

</head>
<body>
  <header>
    <div class="logo">LFIST 💥</div>
    <nav class="nav-menu">
      <a href="Index.html" data-translate="nav_home">Accueil</a>
      <a href="fist-detector.html" data-translate="nav_fist_detector">Fist-Detector</a>
    </nav>
    <div class="header-controls">
      <button id="languageButton" class="language-btn">🇺🇸 English</button>
      <div id="burger" class="burger">☰</div>
    </div>
  </header>

  <!-- Menu de raccourcis vers les sections -->
  <nav class="quick-nav">
    <div class="quick-nav-container">
      <a href="#victims" class="quick-nav-item" data-translate="nav_victims">🎯 Victimes</a>
      <a href="#twitter-tracking" class="quick-nav-item" data-translate="nav_twitter_tracking">🐦 Suivi</a>
      <a href="#newsletter" class="quick-nav-item" data-translate="nav_newsletter">📧 Newsletter</a>
      <a href="#contact" class="quick-nav-item" data-translate="nav_contact">📞 Contact</a>
    </div>
  </nav>

  <section class="hero">
    <h1 data-translate="fist_detector_title">FIST <span class="highlight">DETECTOR</span></h1>
    <p data-translate="fist_detector_subtitle">Vote chaque semaine pour le memecoin qui va prendre cher ! 💥</p>
    <div class="fun-emoji" style="display: flex; justify-content: space-between; align-items: center; width: 100%; position: relative;">
      <div class="image-container" style="position: absolute; left: 0;">
        <img src="fifi.png" alt="LFIST fun" style="height: 150px;" class="floating-fifi" loading="lazy">
      </div>
      <div class="image-container" style="position: absolute; right: 0;">
        <img src="vinnivenere.png" alt="Autre image" style="height: 150px;" class="swaying-vinni" loading="lazy">
      </div>
    </div>

	<div class="fun-emoji">
        <div class="image-container">
          <img src="presentation.png" alt="LFIST fun" style="height: 400px;" class="bouncing-presentation" loading="lazy">
        </div>
      </div>
  </section>
  <section id="victims" class="section neon-section">
    <h2 data-translate="victims_title">Les 3 victimes détectées cette semaine</h2>
    


    <!-- Gagnant de la semaine -->
    <div id="weeklyWinnerSection" style="text-align: center; margin: 2rem auto; max-width: 800px; background: rgba(255, 215, 0, 0.1); border: 2px solid #ffd700; border-radius: 20px; padding: 2rem; display: none;">
      <h2 style="color: #ffd700; margin-bottom: 1rem; font-size: 2rem;" data-translate="weekly_winner_title">🏆 GAGNANT DE LA SEMAINE</h2>
      <div id="weeklyWinnerContent">
        <div style="text-align: center; color: #888; padding: 20px;">
          <span data-translate="weekly_winner_loading">⏳ Chargement du gagnant...</span>
        </div>
      </div>
    </div>

    <!-- Compteur avant remise à zéro des votes -->
    <div class="countdown-container" style="text-align: center; margin: 2rem auto; max-width: 600px;">
      <h3 style="color: #00ff88; margin-bottom: 1rem;" data-translate="countdown_reset_title">⏰ Prochaine remise à zéro des votes</h3>
      <div class="countdown" id="voteCountdown" style="display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap;">
        <div class="countdown-item" style="background: rgba(26, 26, 46, 0.9); border: 2px solid #00ff88; border-radius: 15px; padding: 1rem; min-width: 80px;">
          <div class="countdown-number" id="days" style="font-size: 2rem; font-weight: bold; color: #00ff88;">0</div>
          <div class="countdown-label" style="font-size: 0.9rem; color: #ccc;" data-translate="countdown_days">Jours</div>
        </div>
        <div class="countdown-item" style="background: rgba(26, 26, 46, 0.9); border: 2px solid #00ff88; border-radius: 15px; padding: 1rem; min-width: 80px;">
          <div class="countdown-number" id="hours" style="font-size: 2rem; font-weight: bold; color: #00ff88;">0</div>
          <div class="countdown-label" style="font-size: 0.9rem; color: #ccc;" data-translate="countdown_hours">Heures</div>
        </div>
        <div class="countdown-item" style="background: rgba(26, 26, 46, 0.9); border: 2px solid #00ff88; border-radius: 15px; padding: 1rem; min-width: 80px;">
          <div class="countdown-number" id="minutes" style="font-size: 2rem; font-weight: bold; color: #00ff88;">0</div>
          <div class="countdown-label" style="font-size: 0.9rem; color: #ccc;" data-translate="countdown_minutes">Minutes</div>
        </div>
        <div class="countdown-item" style="background: rgba(26, 26, 46, 0.9); border: 2px solid #00ff88; border-radius: 15px; padding: 1rem; min-width: 80px;">
          <div class="countdown-number" id="seconds" style="font-size: 2rem; font-weight: bold; color: #00ff88;">0</div>
          <div class="countdown-label" style="font-size: 0.9rem; color: #ccc;" data-translate="countdown_seconds">Secondes</div>
        </div>
      </div>
      <p style="color: #888; font-size: 0.9rem; margin-top: 1rem;" data-translate="countdown_reset_info">
        🔄 Les votes sont remis à zéro chaque lundi à 00h00 (heure de Paris)
      </p>
    </div>

    <!-- 🔽 Ce conteneur sera rempli dynamiquement par le JS -->
    <div id="detector-container" style="position: relative; z-index: 20;">
      <div class="status-message loading">
        <h3 data-translate="loading_memecoins">⏳ Chargement des memecoins...</h3>
        <p data-translate="loading_firebase">Connexion à Firebase en cours...</p>
      </div>
    </div>

    <!-- Bouton de débogage (masqué par défaut) -->
    <div id="debug-panel" style="position: fixed; bottom: 20px; right: 20px; z-index: 9999; display: none;">
      <button onclick="forceDisplayMemecoins()" style="
        background: linear-gradient(45deg, #ff0066, #ff3388);
        color: white;
        border: none;
        padding: 15px 20px;
        border-radius: 10px;
        font-weight: bold;
        cursor: pointer;
        box-shadow: 0 5px 15px rgba(255, 0, 102, 0.4);
        font-size: 14px;
      ">
        <span data-translate="btn_force_display">🔧 FORCER AFFICHAGE</span>
      </button>
    </div>





    <!-- Message de vote - PLACÉ APRÈS LES MEMECOINS -->
    <p class="meme-text" data-translate="vote_message" style="margin-top: 4rem;">Tu ne peux voter qu'une seule fois par semaine mais en attendant rejoins sur nos réseaux et inscris-toi à la newsletter. Sinon reviens lundi !</p>
  </section>

  <!-- Section de suivi Twitter et votes -->
  <section id="twitter-tracking" class="section twitter-tracking-section">
    <h2 data-translate="twitter_tracking_title">🐦 Suivi @LFISTCOIN & Votes</h2>
    <p data-translate="twitter_tracking_subtitle">Suivez en temps réel les mentions @LFISTCOIN et l'évolution des votes :</p>
    
    <div class="tracking-container">
      <div class="tracking-grid">
        <!-- Section Twitter Feed -->
        <div class="twitter-feed-section">
          <h3 data-translate="twitter_mentions_title">🔥 Dernières mentions @LFISTCOIN</h3>
          <div id="twitterFeed" class="twitter-feed">
            <div class="loading-tweets">
              <div class="tweet-loading-spinner"></div>
              <p data-translate="twitter_loading">Chargement des tweets...</p>
            </div>
          </div>
          <div class="twitter-actions">
            <button onclick="refreshTwitterFeed()" class="refresh-btn" data-translate="btn_refresh">🔄 Actualiser</button>
            <a href="https://twitter.com/LFISTCOIN" target="_blank" class="follow-btn" data-translate="btn_follow_twitter">
              🐦 Suivre @LFISTCOIN
            </a>
          </div>
        </div>
        
        <!-- Section Statistiques des votes -->
        <div class="vote-stats-section">
          <h3 data-translate="vote_stats_title">📊 Statistiques des Votes</h3>
          <div id="voteStats" class="vote-stats-container">
            <div class="stat-card">
              <div class="stat-number" id="totalVotesCount">0</div>
              <div class="stat-label" data-translate="stat_total_votes">Total des votes</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="weeklyVotesCount">0</div>
              <div class="stat-label" data-translate="stat_weekly_votes">Cette semaine</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="activeMemecoinCount">0</div>
              <div class="stat-label" data-translate="stat_active_memecoins">Memecoins actifs</div>
            </div>
          </div>
          
          <div class="vote-leaderboard">
            <h4 data-translate="leaderboard_title">🏆 Classement actuel</h4>
            <div id="voteLeaderboard" class="leaderboard-list">
              <div class="loading-leaderboard" data-translate="loading_leaderboard">Chargement du classement...</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Section Activité récente -->
      <div class="recent-activity">
        <h3 data-translate="recent_activity_title">⚡ Activité récente</h3>
        <div id="recentActivity" class="activity-feed">
          <div class="loading-activity" data-translate="loading_activity">Chargement de l'activité...</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Popup de confirmation de vote avec partage social - VERSION AMÉLIORÉE -->
  <div id="voteConfirmationPopup" class="popup-overlay">
    <div class="popup-content">
      <div class="popup-header">
        <h2 data-translate="vote_confirmed_title">🎉 Vote Confirmé !</h2>
        <button class="close-btn" onclick="closeVotePopup()">&times;</button>
      </div>
      
      <div class="popup-body">
        <div class="voted-coin">
          <img id="votedCoinLogo" src="" alt="Logo" class="voted-coin-logo">
          <div class="voted-coin-info">
            <h3 id="votedCoinName">Nom du Memecoin</h3>
            <p data-translate="vote_thanks_message">Merci d'avoir voté ! Votre choix a été enregistré.</p>
          </div>
        </div>
        
        <div class="share-section">
          <h4 data-translate="share_vote_title">📢 Partagez votre vote !</h4>
          <p data-translate="share_vote_desc">Invitez vos amis à découvrir et voter sur <strong>Lfistcoin.netlify.app</strong></p>
        </div>
        
        <div class="social-buttons">
          <button class="social-btn twitter" onclick="shareVoteOnTwitter()" data-translate="btn_share_twitter">
            🐦 Twitter
          </button>
          <button class="social-btn telegram" onclick="shareVoteOnTelegram()" data-translate="btn_share_telegram">
            💬 Telegram
          </button>
          <button class="social-btn reddit" onclick="shareVoteOnReddit()" data-translate="btn_share_reddit">
            🔴 Reddit
          </button>
          <button class="social-btn facebook" onclick="shareVoteOnFacebook()" data-translate="btn_share_facebook">
            📘 Facebook
          </button>
        </div>
        
        <div class="popup-actions">
          <button class="confirm-btn" onclick="closeVotePopup()">
            ✅ Parfait, merci !
          </button>
        </div>
      </div>
    </div>
  </div>

  <section id="newsletter" style="text-align: center; margin-top: 40px;">
  <h2 data-translate="newsletter_title">📬 Inscris-toi à notre newsletter</h2>
  <p data-translate="newsletter_subtitle">Reste informé des nouveaux memecoins détectés chaque semaine !</p>
  <input type="email" id="emailInput" data-translate-placeholder="newsletter_placeholder" placeholder="Ton adresse email" style="padding: 10px; width: 250px; border-radius: 8px; border: 1px solid #ccc;">
  <button onclick="subscribeEmail()" data-translate="btn_subscribe" style="padding: 10px 20px; border-radius: 8px; background-color: #ff4081; color: white; border: none; cursor: pointer;">S'inscrire</button>
  <p id="emailMsg" style="margin-top: 10px;"></p>
</section>

  
  <!-- Section Communauté -->
<section id="contact" class="section community-section" style="text-align: center;">
<div class="fun-emoji" style="text-align: center;">
        <div class="image-container" style="text-align: center;">
          <img src="alien.png" alt="LFIST fun" style="height: 400px;" class="wiggling-alien">
        </div>
      </div>
  <h2 class="section-title" style="text-align: center;" data-translate="community_title_fist">💬 Rejoins la FISTFAMILY</h2>
  <p class="community-text" style="text-align: center;">Memecoins, chaos et bienveillance douteuse — ici, c’est chez toi maintenant.</p>

  <div class="community-buttons" style="text-align: center; justify-content: center;">
    <a href="https://x.com/LFISTCOIN" target="_blank" class="btn-social x">
      <!-- Icone X SVG -->
      <svg xmlns="http://www.w3.org/2000/svg" fill="white" height="20" width="20" viewBox="0 0 24 24"><path d="M14.47 10.37 22 2h-2.12l-6.39 7.13L8.5 2H2l8.04 11.5L2 22h2.12l6.82-7.61L15.5 22H22l-7.53-11.63Zm-2.01 2.23-.79-1.13L4.64 3.5h2.95l5.11 7.34.79 1.13 6.35 9.1h-2.95l-5.43-7.47Z"/></svg>
      Rejoins-nous sur X
    </a>
    <a href="https://t.me/lfistcoin" target="_blank" class="btn-social telegram">
      <!-- Icone Telegram SVG -->
      <svg xmlns="http://www.w3.org/2000/svg" fill="white" height="20" width="20" viewBox="0 0 24 24"><path d="M9.043 16.882l-.403 3.92c.577 0 .825-.246 1.129-.541l2.706-2.555 5.612 4.099c1.03.567 1.769.27 2.038-.956l3.694-17.375h-.001c.33-1.527-.538-2.124-1.54-1.754L1.328 9.442c-1.48.577-1.46 1.4-.252 1.78l5.912 1.846 13.68-8.63c.643-.432 1.229-.2.747.233l-11.372 10.21Z"/></svg>
      Canal Telegram
    </a>
  </div>

  <p class="email-contact" style="text-align: center;">💌 Tu veux causer sérieusement (ou pas) ? Écris-nous :  
    <a href="mailto:lfistcoin@gmail.com" class="email-link">lfistcoin@gmail.com</a>
  </p>
</section>

  <footer>
    <div class="footer-content">
      <p data-translate="footer_copyright">© 2025 LFIST Token. Powered by mèmes et conviction.</p>
      <div class="visit-counter">
        <span data-translate="visit_counter_text">Visites :</span> 
        <span id="visitCount">0</span> 
        <span class="meme-footer">💥</span>
      </div>
    </div>
  </footer>

  <!-- EmailJS CDN -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  
  <!-- 🔽 Ton script JS principal avec Firebase -->
  <script type="module" src="./main.js"></script>
  <!-- Script de traduction -->
  <script src="translations.js"></script>
  <!-- Script du compteur de visites -->
  <script type="module" src="visit-counter.js"></script>
  <!-- 🔽 Nouveau système hybride FIST-DETECTOR -->
  <script type="module" src="fist-detector-final.js"></script>
  
  <script>
  // Menu burger mobile pour fist-detector
  document.addEventListener('DOMContentLoaded', function() {
      const burger = document.querySelector('.burger');
      const navMenu = document.querySelector('.nav-menu');
      
      if (burger && navMenu) {
          burger.addEventListener('click', function() {
              navMenu.classList.toggle('active');
              
              // Animation du burger
              if (navMenu.classList.contains('active')) {
                  burger.innerHTML = '✕';
              } else {
                  burger.innerHTML = '☰';
              }
          });
          
          // Fermer le menu quand on clique sur un lien
          const navLinks = navMenu.querySelectorAll('a');
          navLinks.forEach(link => {
              link.addEventListener('click', function() {
                  navMenu.classList.remove('active');
                  burger.innerHTML = '☰';
              });
          });
          
          // Fermer le menu quand on clique en dehors
          document.addEventListener('click', function(e) {
              if (!burger.contains(e.target) && !navMenu.contains(e.target)) {
                  navMenu.classList.remove('active');
                  burger.innerHTML = '☰';
              }
          });
      }
  });
  
  // Le compteur de visites est maintenant géré par visit-counter.js
  </script>

  <!-- JavaScript intégré remplacé par fist-detector-final.js pour éviter les conflits -->
  <script>
    // Code JavaScript intégré supprimé pour éviter les conflits avec fist-detector-final.js
    console.log('🎯 FIST-DETECTOR - Utilisation du script externe fist-detector-final.js');
    
    // Fonction pour obtenir le texte traduit
    function getTranslatedText(key) {
        const currentLang = localStorage.getItem('lfist_language') || 'fr';
        return translations[currentLang][key] || translations['fr'][key] || key;
    }
    import { 
        getDatabase, 
        ref, 
        push, 
        set, 
        get, 
        onValue 
    } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js';

    // Configuration Firebase
    const firebaseConfig = {
        apiKey: "AIzaSyDo6bGH2ofNNhL6SBB9rJ3ZaBMzldp0qp8",
        authDomain: "lfistdur.firebaseapp.com",
        databaseURL: "https://lfistdur-default-rtdb.firebaseio.com",
        projectId: "lfistdur",
        storageBucket: "lfistdur.appspot.com",
        messagingSenderId: "3612454131",
        appId: "1:3612454131:web:dc3eeab8ded57a40671b86"
    };

    // Initialisation Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // Variables globales
    let memecoins = {};
    let votes = {};
    let hasVoted = localStorage.getItem('votedThisWeek') === 'true';
    let countdownInterval = null;

    // Fonction de test pour forcer l'affichage
    function forceDisplayMemecoins() {
        console.log('🔧 FORCE DISPLAY - Début automatique');
        
        // Réinitialiser les variables de contrôle
        isDisplaying = false;
        if (displayTimeout) {
            clearTimeout(displayTimeout);
            displayTimeout = null;
        }
        
        // Ajouter des memecoins de test si aucun n'existe
        if (Object.keys(memecoins).length === 0) {
            console.log('🧪 Ajout de memecoins de test...');
            memecoins = {
                'test-coin-1': {
                    name: 'LFIST Coin',
                    symbol: 'LFIST',
                    description: 'Le memecoin officiel de LFIST - Détecté automatiquement !',
                    price: '0.001',
                    logoUrl: 'https://via.placeholder.com/80x80/00ff88/000000?text=LFIST',
                    active: true,
                    fistDetector: true,
                    website: 'https://lfist.com'
                },
                'test-coin-2': {
                    name: 'Moon Rocket',
                    symbol: 'MOON',
                    description: 'Prêt pour le décollage vers la lune ! 🚀',
                    price: '0.0005',
                    logoUrl: 'https://via.placeholder.com/80x80/ff00cc/ffffff?text=🚀',
                    active: true,
                    fistDetector: true,
                    website: 'https://moonrocket.com'
                }
            };
        }
        
        // Forcer l'affichage immédiatement
        actualDisplayMemecoins();
        
        // Vérifier et corriger après 500ms
        setTimeout(() => {
            const container = document.getElementById('memecoins-container');
            const cards = container ? container.querySelectorAll('.memecoin-card') : [];
            console.log(`🔧 FORCE DISPLAY - Résultat: ${cards.length} cartes visibles`);
            
            if (cards.length === 0) {
                console.error('❌ PROBLÈME CRITIQUE: Tentative de récupération d\'urgence...');
                
                // Méthode d'urgence : injection HTML directe
                if (container) {
                    const emergencyHTML = `
                        <div style="text-align: center; margin-bottom: 30px; position: relative; z-index: 15;">
                            <h2 style="color: #00ff88;">🎯 FIST-DETECTOR</h2>
                            <p style="color: #ccc;">Votez pour votre memecoin préféré cette semaine</p>
                        </div>
                        <div class="memecoins-grid" style="position: relative; z-index: 125;">
                            <div class="memecoin-card" style="z-index: 150 !important; position: relative; display: block !important; visibility: visible !important; opacity: 1 !important;">
                                <div class="memecoin-content">
                                    <div class="memecoin-header">
                                        <div class="memecoin-logo" style="background: linear-gradient(45deg, #00ff88, #00cc66); display: flex; align-items: center; justify-content: center; font-size: 32px; color: #000;">🎯</div>
                                        <div class="memecoin-info">
                                            <h3>LFIST Detector</h3>
                                            <p>Le système de détection automatique de memecoins prometteurs</p>
                                            <p class="memecoin-price">💰 Prix: $0.001</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="vote-section">
                                    <button class="vote-btn" onclick="vote('emergency-coin')" ${hasVoted ? 'disabled' : ''}>
                                        ${hasVoted ? '✅ Déjà voté cette semaine' : '🗳️ Voter pour ce memecoin'}
                                    </button>
                                    <div class="vote-count">
                                        🔥 0 vote cette semaine
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    container.innerHTML = emergencyHTML;
                    console.log('🚨 Mode d\'urgence activé - HTML injecté directement');
                }
            } else {
                console.log('✅ Forçage automatique réussi !');
                
                // Masquer le bouton de débogage s'il était visible
                const debugPanel = document.getElementById('debug-panel');
                if (debugPanel) {
                    debugPanel.style.display = 'none';
                }
            }
        }, 500);
    }

    // Rendre les fonctions disponibles globalement
    window.vote = vote;
    window.forceDisplayMemecoins = forceDisplayMemecoins;

    // Initialisation
    document.addEventListener('DOMContentLoaded', () => {
        console.log('🎯 Initialisation FIST-DETECTOR intégré...');
        initializeFistDetector();
        startCountdownFixed();
        
        // Forçage immédiat après 1 seconde pour éviter tout délai
        setTimeout(() => {
            console.log('⚡ Forçage immédiat après chargement...');
            forceDisplayMemecoins();
        }, 1000);
    });

    function initializeFistDetector() {
        console.log('🚀 Démarrage FIST-DETECTOR...');
        
        let memecoinDataLoaded = false;
        let votesDataLoaded = false;
        
        // Fonction pour afficher seulement quand les deux sont chargés
        function tryDisplayMemecoins() {
            if (memecoinDataLoaded && votesDataLoaded) {
                console.log('📊 Toutes les données chargées, affichage...');
                displayMemecoins();
            } else {
                console.log(`⏳ Attente données: memecoins=${memecoinDataLoaded}, votes=${votesDataLoaded}`);
            }
        }
        
        // Écouter les changements de memecoins
        const memecoinRef = ref(db, 'memecoins');
        onValue(memecoinRef, (snapshot) => {
            console.log('📊 Memecoins reçus de Firebase:', snapshot.val());
            memecoins = snapshot.val() || {};
            memecoinDataLoaded = true;
            tryDisplayMemecoins();
        }, (error) => {
            console.error('❌ Erreur memecoins:', error);
            showStatusMessage('❌ Erreur lors du chargement des memecoins: ' + error.message, 'error');
        });

        // Écouter les changements de votes
        const votesRef = ref(db, 'votes');
        onValue(votesRef, (snapshot) => {
            console.log('🗳️ Votes reçus de Firebase:', snapshot.val());
            votes = snapshot.val() || {};
            votesDataLoaded = true;
            tryDisplayMemecoins();
        }, (error) => {
            console.error('❌ Erreur votes:', error);
            votesDataLoaded = true; // Continuer même en cas d'erreur
            tryDisplayMemecoins();
        });

        // Test de connexion
        testFirebaseConnection();
        
        // Affichage initial après un délai
        setTimeout(() => {
            if (!memecoinDataLoaded) {
                console.log('⚠️ Timeout: affichage forcé sans données Firebase');
                displayMemecoins();
            }
        }, 3000);
        
        // Vérification précoce après 2 secondes
        setTimeout(() => {
            const container = document.getElementById('memecoins-container');
            const loadingMessage = container ? container.querySelector('.status-message.loading') : null;
            
            if (loadingMessage && loadingMessage.style.display !== 'none') {
                console.log('⚡ Forçage précoce après 2 secondes...');
                forceDisplayMemecoins();
            }
        }, 2000);
        
        // Vérifier après 5 secondes si les memecoins sont visibles
        setTimeout(() => {
            const container = document.getElementById('memecoins-container');
            const cards = container ? container.querySelectorAll('.memecoin-card') : [];
            
            if (cards.length === 0) {
                console.warn('⚠️ Aucun memecoin visible après 5 secondes, FORÇAGE AUTOMATIQUE...');
                forceDisplayMemecoins();
                
                // Si toujours pas visible après le forçage, afficher le bouton
                setTimeout(() => {
                    const cardsAfterForce = container ? container.querySelectorAll('.memecoin-card') : [];
                    if (cardsAfterForce.length === 0) {
                        console.error('❌ Échec du forçage automatique, affichage du bouton de débogage');
                        const debugPanel = document.getElementById('debug-panel');
                        if (debugPanel) {
                            debugPanel.style.display = 'block';
                        }
                    } else {
                        console.log('✅ Forçage automatique réussi !');
                    }
                }, 2000);
            } else {
                console.log('✅ Memecoins visibles normalement');
            }
        }, 5000);
    }

    function startCountdownFixed() {
        const countdownEl = document.getElementById('countdown');
        if (!countdownEl) {
            console.error('❌ Element countdown non trouvé');
            return;
        }

        // Vérifier que la structure HTML est déjà en place
        const numberElements = countdownEl.querySelectorAll('.countdown-number');
        if (numberElements.length !== 4) {
            console.log('⚠️ Structure HTML countdown incorrecte, reconstruction...');
            countdownEl.innerHTML = `
                <div class="countdown-display">
                    <div class="countdown-item">
                        <span class="countdown-number">--</span>
                        <span class="countdown-label">JOURS</span>
                    </div>
                    <div class="countdown-item">
                        <span class="countdown-number">--</span>
                        <span class="countdown-label">HEURES</span>
                    </div>
                    <div class="countdown-item">
                        <span class="countdown-number">--</span>
                        <span class="countdown-label">MINUTES</span>
                    </div>
                    <div class="countdown-item">
                        <span class="countdown-number">--</span>
                        <span class="countdown-label">SECONDES</span>
                    </div>
                </div>
            `;
        }

        const updateCountdown = () => {
            try {
                const now = new Date();
                const nextMonday = new Date();
                
                const daysUntilMonday = (8 - now.getDay()) % 7 || 7;
                nextMonday.setDate(now.getDate() + daysUntilMonday);
                nextMonday.setHours(0, 0, 0, 0);
                
                const timeLeft = nextMonday - now;
                
                if (timeLeft <= 0) {
                    countdownEl.innerHTML = `
                        <div style="color: #00ff88; font-size: 1.2em;">
                            🔄 Nouveau vote disponible !
                        </div>
                    `;
                    checkWeeklyReset();
                    return;
                }
                
                const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                
                // Mettre à jour seulement les nombres, pas toute la structure HTML
                const numberElements = countdownEl.querySelectorAll('.countdown-number');
                if (numberElements.length === 4) {
                    numberElements[0].textContent = days.toString().padStart(2, '0');
                    numberElements[1].textContent = hours.toString().padStart(2, '0');
                    numberElements[2].textContent = minutes.toString().padStart(2, '0');
                    numberElements[3].textContent = seconds.toString().padStart(2, '0');
                }
                
            } catch (error) {
                console.error('❌ Erreur countdown:', error);
            }
        };
        
        updateCountdown();
        
        if (countdownInterval) {
            clearInterval(countdownInterval);
        }
        
        countdownInterval = setInterval(updateCountdown, 1000);
        console.log('⏰ Timer corrigé démarré');
    }

    async function testFirebaseConnection() {
        try {
            const testRef = ref(db, 'test');
            await get(testRef);
            console.log('✅ Connexion Firebase OK');
        } catch (error) {
            console.error('❌ Erreur connexion:', error);
            showStatusMessage('❌ Erreur de connexion à Firebase: ' + error.message, 'error');
        }
    }

    // Variable pour éviter les appels multiples
    let displayTimeout = null;
    let isDisplaying = false;

    function displayMemecoins() {
        // Éviter les appels multiples simultanés
        if (isDisplaying) {
            console.log('⚠️ displayMemecoins déjà en cours, ignoré');
            return;
        }

        // Annuler le timeout précédent s'il existe
        if (displayTimeout) {
            clearTimeout(displayTimeout);
        }

        // Délai pour éviter les appels trop fréquents
        displayTimeout = setTimeout(() => {
            actualDisplayMemecoins();
        }, 100);
    }

    function actualDisplayMemecoins() {
        isDisplaying = true;
        console.log('🔄 === AFFICHAGE MEMECOINS DÉBUT ===');
        
        const container = document.getElementById('memecoins-container');
        if (!container) {
            console.error('❌ Container memecoins-container non trouvé');
            isDisplaying = false;
            return;
        }

        console.log('📦 Container trouvé:', container);
        console.log('📊 Memecoins disponibles:', Object.keys(memecoins).length);

        // Filtrer les memecoins actifs et FIST-DETECTOR
        const fistDetectorCoins = Object.entries(memecoins).filter(([id, coin]) => {
            const isValid = coin && coin.active && coin.fistDetector;
            console.log(`🎯 ${coin?.name || 'Unknown'}: active=${coin?.active}, fistDetector=${coin?.fistDetector}, valid=${isValid}`);
            return isValid;
        });

        console.log('🎯 Memecoins FIST-DETECTOR filtrés:', fistDetectorCoins.length);

        if (fistDetectorCoins.length === 0) {
            console.log('⚠️ Aucun memecoin FIST-DETECTOR trouvé');
            showStatusMessage(`
                <h3>🎯 FIST-DETECTOR</h3>
                <p>Aucun memecoin disponible pour le vote</p>
                <p style="font-size: 14px; margin-top: 10px;">
                    Les memecoins apparaîtront ici une fois ajoutés par l'administrateur
                </p>
                <button onclick="location.reload()" style="margin-top: 15px; padding: 10px 20px; background: #00ff88; color: #000; border: none; border-radius: 5px; cursor: pointer;">
                    🔄 Actualiser
                </button>
                <div style="margin-top: 20px; padding: 15px; background: rgba(255, 170, 0, 0.1); border: 1px solid #ffaa00; border-radius: 8px;">
                    <strong>🐛 Debug Info:</strong><br>
                    Total memecoins: ${Object.keys(memecoins).length}<br>
                    Memecoins actifs: ${Object.values(memecoins).filter(c => c?.active).length}<br>
                    Memecoins FIST-DETECTOR: ${Object.values(memecoins).filter(c => c?.fistDetector).length}
                </div>
            `, 'empty');
            isDisplaying = false;
            return;
        }

        // Créer le contenu avec les memecoins
        console.log('🏗️ Création des cartes memecoins...');
        const memecoinCards = fistDetectorCoins.map(([id, coin]) => {
            const voteCount = getVotesForCoin(id);
            console.log(`🃏 Création carte pour ${coin.name}: ${voteCount} votes`);
            return createMemecoinCard(id, coin, voteCount);
        }).join('');

        const htmlContent = `
            <div style="text-align: center; margin-bottom: 30px; position: relative; z-index: 15;">
                <h2 style="color: #00ff88;">🎯 FIST-DETECTOR</h2>
                <p style="color: #ccc;">Votez pour votre memecoin préféré cette semaine</p>
                ${hasVoted ? '<p style="color: #ffaa00; font-weight: bold;">⚠️ Vous avez déjà voté cette semaine</p>' : ''}
            </div>
            <div class="memecoins-grid" style="position: relative; z-index: 25;">
                ${memecoinCards}
            </div>
        `;

        console.log('📝 HTML généré, longueur:', htmlContent.length);
        container.innerHTML = htmlContent;

        // S'assurer que les memecoins restent visibles
        setTimeout(() => {
            const cards = container.querySelectorAll('.memecoin-card');
            console.log(`🃏 Cartes trouvées après insertion: ${cards.length}`);
            
            cards.forEach((card, index) => {
                card.style.zIndex = (50 + index).toString();
                card.style.position = 'relative';
                card.style.display = 'block';
                card.style.visibility = 'visible';
                card.style.opacity = '1';
                
                // Vérifier que la carte est visible
                const rect = card.getBoundingClientRect();
                console.log(`🃏 Carte ${index + 1}: visible=${rect.height > 0}, z-index=${card.style.zIndex}`);
            });
            
            console.log(`✅ ${cards.length} cartes memecoins configurées et visibles`);
            console.log('🔄 === AFFICHAGE MEMECOINS FIN ===');
            isDisplaying = false;
        }, 200);
    }

    function createMemecoinCard(id, coin, voteCount) {
        const logoImg = coin.logoUrl ? 
            `<img src="${coin.logoUrl}" class="memecoin-logo" alt="${coin.name}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
             <div class="memecoin-logo" style="background: linear-gradient(45deg, #333, #555); display: none; align-items: center; justify-content: center; font-size: 32px; color: #00ff88;">🪙</div>` :
            `<div class="memecoin-logo" style="background: linear-gradient(45deg, #333, #555); display: flex; align-items: center; justify-content: center; font-size: 32px; color: #00ff88;">🪙</div>`;

        return `
            <div class="memecoin-card" style="z-index: 25 !important; position: relative;">
                <div class="memecoin-content">
                    <div class="memecoin-header">
                        ${logoImg}
                        <div class="memecoin-info">
                            <h3>${coin.name} (${coin.symbol})</h3>
                            <p>${coin.description || 'Memecoin prometteur détecté par notre système'}</p>
                            ${coin.price ? `<p class="memecoin-price">💰 Prix: $${coin.price}</p>` : ''}
                        </div>
                    </div>
                    
                    ${coin.website ? `
                        <div class="memecoin-website">
                            <a href="${coin.website}" target="_blank">
                                🌐 Visiter le site officiel
                            </a>
                        </div>
                    ` : ''}
                </div>
                
                <div class="vote-section">
                    <button class="vote-btn" onclick="vote('${id}')" ${hasVoted ? 'disabled' : ''}>
                        ${hasVoted ? '✅ Déjà voté cette semaine' : '🗳️ Voter pour ce memecoin'}
                    </button>
                    <div class="vote-count">
                        🔥 ${voteCount} vote${voteCount > 1 ? 's' : ''} cette semaine
                    </div>
                </div>
            </div>
        `;
    }

    function getVotesForCoin(coinId) {
        if (!votes) return 0;
        return Object.values(votes).filter(vote => vote.coinId === coinId).length;
    }

    async function vote(coinId) {
        if (hasVoted) {
            alert('Vous avez déjà voté cette semaine !');
            return;
        }

        try {
            console.log('🗳️ Vote pour:', coinId);

            const votesRef = ref(db, 'votes');
            const newVoteRef = push(votesRef);
            await set(newVoteRef, {
                coinId: coinId,
                timestamp: Date.now(),
                userAgent: navigator.userAgent.substring(0, 50)
            });

            hasVoted = true;
            localStorage.setItem('votedThisWeek', 'true');

            console.log('✅ Vote enregistré');
            
            displayMemecoins();
            
            // Afficher le popup de confirmation avec partage social
            const votedCoin = memecoins[coinId];
            if (votedCoin) {
                showVoteConfirmationPopup(coinId);
            }

        } catch (error) {
            console.error('❌ Erreur vote:', error);
            alert('Erreur lors du vote: ' + error.message);
        }
    }

    function checkWeeklyReset() {
        const lastReset = localStorage.getItem('lastWeeklyReset');
        const now = Date.now();
        const oneWeek = 7 * 24 * 60 * 60 * 1000;
        
        if (!lastReset || (now - parseInt(lastReset)) > oneWeek) {
            localStorage.removeItem('votedThisWeek');
            localStorage.setItem('lastWeeklyReset', now.toString());
            hasVoted = false;
            console.log('🔄 Reset hebdomadaire effectué');
        }
    }

    function showStatusMessage(message, type) {
        const container = document.getElementById('memecoins-container');
        if (container) {
            container.innerHTML = `
                <div class="status-message ${type}">
                    ${message}
                </div>
            `;
        }
    }

    // Vérifier le reset au chargement
    checkWeeklyReset();

    // === FONCTIONS POUR LA SECTION TWITTER TRACKING ===
    
    // Initialiser la section Twitter tracking
    function initializeTwitterTracking() {
        console.log('🐦 Initialisation du suivi Twitter...');
        loadTwitterFeed();
        loadVoteStats();
        loadRecentActivity();
        
        // Actualiser toutes les 5 minutes
        setInterval(() => {
            loadVoteStats();
            loadRecentActivity();
        }, 5 * 60 * 1000);
        
        // Actualiser le feed Twitter toutes les 10 minutes
        setInterval(loadTwitterFeed, 10 * 60 * 1000);
    }
    
    async function loadTwitterFeed() {
        const twitterFeed = document.getElementById('twitterFeed');
        if (!twitterFeed) return;
        
        // Afficher le loading
        twitterFeed.innerHTML = `
            <div class="loading-tweets">
                <div class="tweet-loading-spinner"></div>
                <p>Recherche des mentions @LFISTCOIN...</p>
            </div>
        `;
        
        try {
            // OPTION 1: API Twitter officielle (nécessite clés API)
            // const tweets = await fetchRealTwitterMentions();
            
            // OPTION 2: Service proxy/scraping (plus simple mais moins fiable)
            // const tweets = await fetchTwitterProxy();
            
            // OPTION 3: Simulation réaliste avec variation (temporaire)
            const tweets = generateRealisticTweets();
            
            if (tweets && tweets.length > 0) {
                displayTweets(tweets);
            } else {
                displayNoTweetsMessage();
            }
            
        } catch (error) {
            console.error('❌ Erreur chargement Twitter:', error);
            displayTwitterError();
        }
    }
    
    // Fonction pour l'API Twitter officielle (nécessite configuration)
    async function fetchRealTwitterMentions() {
        // ⚠️ NÉCESSITE UNE CLÉ API TWITTER
        const TWITTER_BEARER_TOKEN = 'VOTRE_TOKEN_ICI'; // À configurer
        
        if (!TWITTER_BEARER_TOKEN || TWITTER_BEARER_TOKEN === 'VOTRE_TOKEN_ICI') {
            throw new Error('Token Twitter non configuré');
        }
        
        const response = await fetch('https://api.twitter.com/2/tweets/search/recent', {
            method: 'GET',
            headers: {
                'Authorization': `Bearer ${TWITTER_BEARER_TOKEN}`,
                'Content-Type': 'application/json'
            },
            params: new URLSearchParams({
                'query': '@LFISTCOIN OR #LFIST OR "LFIST COIN"',
                'max_results': '10',
                'tweet.fields': 'created_at,author_id,public_metrics',
                'user.fields': 'name,username,profile_image_url'
            })
        });
        
        if (!response.ok) {
            throw new Error(`Twitter API Error: ${response.status}`);
        }
        
        const data = await response.json();
        return formatTwitterData(data);
    }
    
    // Fonction pour service proxy (alternative)
    async function fetchTwitterProxy() {
        // Utilise un service tiers pour récupérer les tweets
        // Exemple avec un service gratuit (à adapter selon le service choisi)
        const response = await fetch(`https://api.twitter-proxy.com/search?q=@LFISTCOIN&count=10`);
        
        if (!response.ok) {
            throw new Error('Erreur service proxy Twitter');
        }
        
        const data = await response.json();
        return formatProxyData(data);
    }
    
    // Simulation réaliste avec variation (solution temporaire)
    function generateRealisticTweets() {
        const baseTime = Date.now();
        const variations = [
            'Viens de découvrir @LFISTCOIN ! Leur système de vote pour les memecoins est génial ! 🔥',
            'Le vote de la semaine sur @LFISTCOIN est lancé ! Qui va gagner cette fois ? 🏆',
            '@LFISTCOIN a un concept unique ! Voter pour les memecoins de la semaine, j\'adore ! 💪',
            'Nouveau projet intéressant : @LFISTCOIN permet de voter pour les memecoins les plus prometteurs ! 🗳️',
            'J\'ai voté sur @LFISTCOIN cette semaine ! Interface super clean 👌',
            'Les résultats du vote @LFISTCOIN sont toujours surprenants ! 📊',
            'Merci @LFISTCOIN pour cette plateforme de vote transparente ! 🙏',
            'Qui d\'autre suit les votes hebdomadaires sur @LFISTCOIN ? 🤔'
        ];
        
        const users = [
            { name: 'CryptoEnthusiast', handle: '@cryptofan2024', avatar: '🚀' },
            { name: 'MemeLord', handle: '@meme_master', avatar: '😎' },
            { name: 'DeFi_Trader', handle: '@defi_pro', avatar: '💎' },
            { name: 'CryptoNews', handle: '@crypto_daily', avatar: '📰' },
            { name: 'BlockchainBuzz', handle: '@blockchain_buzz', avatar: '⚡' },
            { name: 'TokenHunter', handle: '@token_hunter', avatar: '🎯' },
            { name: 'CryptoGuru', handle: '@crypto_guru', avatar: '🧙‍♂️' },
            { name: 'MoonSeeker', handle: '@moon_seeker', avatar: '🌙' }
        ];
        
        // Générer des tweets avec variation temporelle
        return Array.from({ length: 5 }, (_, i) => {
            const user = users[Math.floor(Math.random() * users.length)];
            const content = variations[Math.floor(Math.random() * variations.length)];
            const hoursAgo = Math.floor(Math.random() * 12) + 1;
            const likes = Math.floor(Math.random() * 50) + 5;
            const retweets = Math.floor(Math.random() * 25) + 2;
            
            return {
                user: user.name,
                handle: user.handle,
                avatar: user.avatar,
                content: content,
                time: `${hoursAgo}h`,
                likes: likes,
                retweets: retweets,
                timestamp: baseTime - (hoursAgo * 60 * 60 * 1000)
            };
        }).sort((a, b) => b.timestamp - a.timestamp);
    }
    
    function displayTweets(tweets) {
        const twitterFeed = document.getElementById('twitterFeed');
        if (!twitterFeed) return;
        
        const tweetsHtml = tweets.map(tweet => `
            <div class="tweet-item">
                <div class="tweet-header">
                    <div class="tweet-avatar">${tweet.avatar}</div>
                    <div class="tweet-user">${tweet.user}</div>
                    <div class="tweet-handle">${tweet.handle}</div>
                    <div class="tweet-time">${tweet.time}</div>
                </div>
                <div class="tweet-content">${tweet.content}</div>
                <div class="tweet-stats">
                    <span>❤️ ${tweet.likes}</span>
                    <span>🔄 ${tweet.retweets}</span>
                </div>
            </div>
        `).join('');
        
        twitterFeed.innerHTML = tweetsHtml;
        console.log(`✅ ${tweets.length} tweets chargés`);
    }
    
    function displayNoTweetsMessage() {
        const twitterFeed = document.getElementById('twitterFeed');
        if (twitterFeed) {
            twitterFeed.innerHTML = `
                <div class="loading-tweets">
                    <p>Aucune mention récente trouvée</p>
                    <p style="font-size: 0.9em; color: #666;">Les mentions apparaîtront ici dès qu'elles seront détectées</p>
                </div>
            `;
        }
    }
    
    function displayTwitterError() {
        const twitterFeed = document.getElementById('twitterFeed');
        if (twitterFeed) {
            twitterFeed.innerHTML = `
                <div class="loading-tweets">
                    <p style="color: #ff4444;">❌ Erreur de connexion Twitter</p>
                    <p style="font-size: 0.9em; color: #666;">Nouvelle tentative dans 10 minutes</p>
                </div>
            `;
        }
    }
    
    function loadVoteStats() {
        // Calculer les statistiques des votes
        const totalVotes = Object.keys(votes).length;
        const weekAgo = Date.now() - (7 * 24 * 60 * 60 * 1000);
        const weeklyVotes = Object.values(votes).filter(vote => 
            vote.timestamp && vote.timestamp > weekAgo
        ).length;
        const activeMemecoins = Object.values(memecoins).filter(coin => coin.active).length;
        
        // Mettre à jour les compteurs
        const totalVotesEl = document.getElementById('totalVotesCount');
        const weeklyVotesEl = document.getElementById('weeklyVotesCount');
        const activeMemecoinEl = document.getElementById('activeMemecoinCount');
        
        if (totalVotesEl) totalVotesEl.textContent = totalVotes;
        if (weeklyVotesEl) weeklyVotesEl.textContent = weeklyVotes;
        if (activeMemecoinEl) activeMemecoinEl.textContent = activeMemecoins;
        
        // Mettre à jour le classement
        loadVoteLeaderboard();
    }
    
    function loadVoteLeaderboard() {
        const leaderboard = document.getElementById('voteLeaderboard');
        if (!leaderboard) return;
        
        const activeMemecoins = Object.entries(memecoins).filter(([id, coin]) => coin.active);
        
        if (activeMemecoins.length === 0) {
            leaderboard.innerHTML = '<div class="loading-leaderboard">Aucun memecoin actif</div>';
            return;
        }
        
        // Calculer les votes pour chaque memecoin
        const coinVotes = activeMemecoins.map(([id, coin]) => ({
            id,
            name: coin.name,
            symbol: coin.symbol,
            votes: getVotesForCoin(id)
        })).sort((a, b) => b.votes - a.votes);
        
        const leaderboardHtml = coinVotes.map((coin, index) => {
            const medals = ['🥇', '🥈', '🥉'];
            const medal = medals[index] || '🔸';
            
            return `
                <div class="leaderboard-item">
                    <div class="leaderboard-rank">${medal}</div>
                    <div class="leaderboard-coin">${coin.name} (${coin.symbol})</div>
                    <div class="leaderboard-votes">${coin.votes} votes</div>
                </div>
            `;
        }).join('');
        
        leaderboard.innerHTML = leaderboardHtml;
    }
    
    function loadRecentActivity() {
        const activityFeed = document.getElementById('recentActivity');
        if (!activityFeed) return;
        
        // Générer des activités récentes basées sur les votes
        const recentVotes = Object.values(votes)
            .filter(vote => vote.timestamp)
            .sort((a, b) => b.timestamp - a.timestamp)
            .slice(0, 10);
        
        const activities = recentVotes.map(vote => {
            const coin = Object.values(memecoins).find(c => 
                Object.keys(memecoins).find(key => memecoins[key] === c) === vote.coinId
            );
            const timeAgo = getTimeAgo(vote.timestamp);
            
            return {
                icon: '🗳️',
                text: `Vote pour ${coin?.name || 'un memecoin'}`,
                time: timeAgo
            };
        });
        
        // Ajouter quelques activités simulées
        activities.unshift(
            {
                icon: '🔥',
                text: 'Nouveau memecoin ajouté au vote',
                time: '1h'
            },
            {
                icon: '📊',
                text: 'Statistiques mises à jour',
                time: '2h'
            }
        );
        
        const activitiesHtml = activities.slice(0, 8).map(activity => `
            <div class="activity-item">
                <div class="activity-icon">${activity.icon}</div>
                <div class="activity-content">
                    <div class="activity-text">${activity.text}</div>
                    <div class="activity-time">Il y a ${activity.time}</div>
                </div>
            </div>
        `).join('');
        
        activityFeed.innerHTML = activitiesHtml || '<div class="loading-activity">Aucune activité récente</div>';
    }
    
    function getTimeAgo(timestamp) {
        const now = Date.now();
        const diff = now - timestamp;
        const minutes = Math.floor(diff / (1000 * 60));
        const hours = Math.floor(diff / (1000 * 60 * 60));
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        
        if (days > 0) return `${days}j`;
        if (hours > 0) return `${hours}h`;
        if (minutes > 0) return `${minutes}min`;
        return 'maintenant';
    }
    
    function refreshTwitterFeed() {
        const twitterFeed = document.getElementById('twitterFeed');
        if (twitterFeed) {
            twitterFeed.innerHTML = `
                <div class="loading-tweets">
                    <div class="tweet-loading-spinner"></div>
                    <p>Actualisation des tweets...</p>
                </div>
            `;
            
            setTimeout(() => {
                loadTwitterFeed();
            }, 1000);
        }
    }
    
    // === FONCTIONS POUR LE POPUP DE CONFIRMATION DE VOTE ===
    
    let currentVotedCoin = null;
    
    function showVoteConfirmationPopup(coinId) {
        const coin = memecoins[coinId];
        if (!coin) return;
        
        currentVotedCoin = coin;
        
        // Mettre à jour les informations du coin dans le popup
        const coinLogo = document.getElementById('votedCoinLogo');
        const coinName = document.getElementById('votedCoinName');
        
        if (coinLogo) {
            coinLogo.src = coin.logoUrl || 'https://via.placeholder.com/60x60/00ff88/000000?text=' + coin.symbol;
            coinLogo.alt = coin.name + ' logo';
        }
        
        if (coinName) {
            coinName.textContent = `${coin.name} (${coin.symbol})`;
        }
        
        // Afficher le popup avec animation
        const popup = document.getElementById('voteConfirmationPopup');
        if (popup) {
            popup.classList.add('show');
            document.body.style.overflow = 'hidden'; // Empêcher le scroll
        }
        
        console.log('✅ Popup de vote affiché pour:', coin.name);
    }
    
    function closeVotePopup() {
        const popup = document.getElementById('voteConfirmationPopup');
        if (popup) {
            popup.classList.remove('show');
            document.body.style.overflow = 'auto'; // Réactiver le scroll
        }
        currentVotedCoin = null;
        console.log('❌ Popup de vote fermé');
    }
    
    function shareVoteOnTwitter() {
        if (!currentVotedCoin) return;
        
        const text = `🗳️ Je viens de voter pour ${currentVotedCoin.name} (${currentVotedCoin.symbol}) sur LFIST ! 🚀\n\nRejoignez-moi pour voter pour votre memecoin préféré cette semaine !\n\n👉 Lfistcoin.netlify.app\n\n#LFIST #Memecoin #Vote #${currentVotedCoin.symbol}`;
        const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
        window.open(url, '_blank', 'width=600,height=400');
        
        console.log('🐦 Partage Twitter:', currentVotedCoin.name);
    }
    
    function shareVoteOnTelegram() {
        if (!currentVotedCoin) return;
        
        const text = `🗳️ Je viens de voter pour ${currentVotedCoin.name} (${currentVotedCoin.symbol}) sur LFIST ! 🚀\n\nRejoignez-moi pour voter pour votre memecoin préféré cette semaine !\n\n👉 Lfistcoin.netlify.app`;
        const url = `https://t.me/share/url?url=https://Lfistcoin.netlify.app&text=${encodeURIComponent(text)}`;
        window.open(url, '_blank', 'width=600,height=400');
        
        console.log('💬 Partage Telegram:', currentVotedCoin.name);
    }
    
    function shareVoteOnReddit() {
        if (!currentVotedCoin) return;
        
        const title = `🗳️ Je viens de voter pour ${currentVotedCoin.name} sur LFIST !`;
        const text = `Salut la communauté !\n\nJe viens de voter pour ${currentVotedCoin.name} (${currentVotedCoin.symbol}) sur LFIST !\n\nC'est un site génial où on peut voter chaque semaine pour notre memecoin préféré. Venez découvrir et voter vous aussi !\n\nLe concept est simple : chaque semaine, 3 memecoins sont sélectionnés et la communauté vote pour celui qui va "prendre cher" ! 😄\n\nRejoignez-nous sur Lfistcoin.netlify.app !`;
        const url = `https://reddit.com/submit?url=https://Lfistcoin.netlify.app&title=${encodeURIComponent(title)}&text=${encodeURIComponent(text)}`;
        window.open(url, '_blank', 'width=800,height=600');
        
        console.log('🔴 Partage Reddit:', currentVotedCoin.name);
    }
    
    function shareVoteOnFacebook() {
        if (!currentVotedCoin) return;
        
        const text = `🗳️ Je viens de voter pour ${currentVotedCoin.name} (${currentVotedCoin.symbol}) sur LFIST ! 🚀\n\nRejoignez-moi pour découvrir et voter pour votre memecoin préféré cette semaine !\n\nUn concept unique : voter pour les memecoins les plus prometteurs !`;
        const url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent('https://Lfistcoin.netlify.app')}&quote=${encodeURIComponent(text)}`;
        window.open(url, '_blank', 'width=600,height=400');
        
        console.log('📘 Partage Facebook:', currentVotedCoin.name);
    }
    
    // Fermer le popup en cliquant en dehors
    document.addEventListener('click', function(e) {
        const popup = document.getElementById('voteConfirmationPopup');
        const popupContent = document.querySelector('.popup-content');
        
        if (popup && popup.classList.contains('show') && !popupContent.contains(e.target)) {
            closeVotePopup();
        }
    });
    
    // Fermer le popup avec la touche Escape
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && document.getElementById('voteConfirmationPopup').classList.contains('show')) {
            closeVotePopup();
        }
    });

    // Rendre les fonctions disponibles globalement
    window.refreshTwitterFeed = refreshTwitterFeed;
    window.showVoteConfirmationPopup = showVoteConfirmationPopup;
    window.closeVotePopup = closeVotePopup;
    window.shareVoteOnTwitter = shareVoteOnTwitter;
    window.shareVoteOnTelegram = shareVoteOnTelegram;
    window.shareVoteOnReddit = shareVoteOnReddit;
    window.shareVoteOnFacebook = shareVoteOnFacebook;
    
    // Initialiser le suivi Twitter après un délai
    setTimeout(initializeTwitterTracking, 2000);

    
    // Vérification que le container existe
    document.addEventListener('DOMContentLoaded', function() {
      const container = document.getElementById('detector-container');
      if (container) {
        console.log('✅ Container detector-container trouvé');
      } else {
        console.error('❌ Container detector-container non trouvé');
      }
    });
  </script>
  
  <!-- Fallback vers main.js si nécessaire -->
  <script type="module" src="main.js"></script>

  <!-- 🔧 CORRECTIF pour le problème d'affichage des memecoins -->
  <script src="fist-detector-fix.js"></script>

</body>
</html>
